# OpenOCD Configuration File for STM32 Bare Metal Lab

# This configuration file is used to set up OpenOCD for programming and debugging STM32 microcontrollers. 
# It defines the interface and target settings required for the STM32 microcontroller used in the lab sessions.

# Interface configuration
interface stlink-v2
transport select hla_swd

# ST-Link configuration
stlink_device = "ST-LINK/V2"
stlink_vid = 0x0483
stlink_pid = 0x3748

# Target configuration
set CHIPNAME stm32f4x
source [find target/stm32f4x.cfg]

# Reset configuration
reset_config srst_only

# Flashing configuration
init
reset init
halt

# Load the firmware
flash write_image erase ../firmware/build/your_firmware.bin

# Reset and run the target
reset run
exit